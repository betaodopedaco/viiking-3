(function() {
  const chatContainer = document.createElement('div');
  chatContainer.id = 'chat-container';
  document.body.appendChild(chatContainer);

  const input = document.createElement('input');
  input.id = 'chat-input';
  chatContainer.appendChild(input);

  input.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      const message = input.value;
      input.value = '';
      fetch('https://viiking-3-6.onrender.com/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message, session_id: 'default' })
      })
      .then(response => response.json())
      .then(data => {
        const responseMessage = data.response || 'Sem resposta';
        alert(responseMessage);
      })
      .catch(error => {
        console.error('Erro:', error);
      });
    }
  });
})();

